(function(B){var A=(function(){var C=(typeof document.selection!=="undefined"&&typeof document.selection.createRange!=="undefined");return{getSelectionRange:function(G){var J,E;G.focus();if(typeof G.selectionStart!=="undefined"){J=G.selectionStart;E=G.selectionEnd;}else{if(C){var F=document.selection.createRange();var H=F.text.length;if(F.parentElement()!==G){throw ("Unable to get selection range.");}if(G.type==="textarea"){var D=F.duplicate();D.moveToElementText(G);D.setEndPoint("EndToEnd",F);J=D.text.length-H;}else{var I=G.createTextRange();I.setEndPoint("EndToStart",F);J=I.text.length;}E=J+H;}else{throw ("Unable to get selection range.");}}return{start:J,end:E};},getSelectionStart:function(D){return this.getSelectionRange(D).start;},getSelectionEnd:function(D){return this.getSelectionRange(D).end;},setSelectionRange:function(F,H,D){F.focus();if(typeof D==="undefined"){D=H;}if(typeof F.selectionStart!=="undefined"){F.setSelectionRange(H,D);}else{if(C){var G=F.value;var E=F.createTextRange();D-=H+G.slice(H+1,D).split("\n").length-1;H-=G.slice(0,H).split("\n").length-1;E.move("character",H);E.moveEnd("character",D);E.select();}else{throw ("Unable to set selection range.");}}},getSelectedText:function(E){var D=this.getSelectionRange(E);return E.value.substring(D.start,D.end);},insertText:function(E,I,D,F,K){F=F||D;var L=I.length;var G=E.value.substring(0,D);var J=E.value.substr(F);E.value=G+I+J;var H=D+L;if(K===true){this.setSelectionRange(E,D,H);}else{this.setSelectionRange(E,H);}},replaceSelectedText:function(E,G,F){var D=this.getSelectionRange(E);this.insertText(E,G,D.start,D.end,F);},wrapSelectedText:function(E,G,D,F){var H=G+this.getSelectedText(E)+D;this.replaceSelectedText(E,H,F);}};})();B.fn.getSelectionRange=function(){if(this.size()===1){return A.getSelectionRange(this.get(0));}else{return this.map(function(){return A.getSelectionRange(this);});}};B.fn.getSelectionStart=function(){if(this.size()===1){return A.getSelectionStart(this.get(0));}else{return this.map(function(){return A.getSelectionStart(this);});}};B.fn.getSelectionEnd=function(){if(this.size()===1){return A.getSelectionEnd(this.get(0));}else{return this.map(function(){return A.getSelectionEnd(this);});}};B.fn.getSelectedText=function(){if(this.size()===1){return A.getSelectedText(this.get(0));}else{return this.map(function(){return A.getSelectedText(this);});}};B.fn.setSelectionRange=function(D,C){return this.each(function(){A.setSelectionRange(this,D,C);});};B.fn.insertText=function(E,F,C,D){return this.each(function(){A.insertText(this,E,F,C,D);});};B.fn.replaceSelectedText=function(D,C){return this.each(function(){A.replaceSelectedText(this,D,C);});};B.fn.wrapSelectedText=function(E,C,D){return this.each(function(){A.wrapSelectedText(this,E,C,D);});};})(jQuery);
